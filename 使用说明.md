# 点云查看器使用说明

## 🎯 **支持的文件格式**

### 1. **PLY格式** (推荐) ⭐
- **文件扩展名**: `.ply`
- **导出方式**: CloudCompare → File → Save → 选择PLY格式 → ASCII
- **优点**: 
  - 标准格式，广泛支持
  - 包含详细的头部信息
  - 支持多种属性（坐标、法向量、强度、曲率等）
  - 解析稳定可靠

### 2. **TXT格式**
- **文件扩展名**: `.txt`
- **导出方式**: CloudCompare → File → Save → ASCII cloud
- **格式**: 每行包含 X Y Z 强度值 等数据

## 🚀 **快速开始**

### 步骤1: CloudCompare导出
1. 在CloudCompare中打开您的点云文件
2. 选择菜单 `File` → `Save`
3. **推荐选择PLY格式**
4. 确保选择ASCII格式（不是binary）
5. 保存文件

### 步骤2: 加载到查看器
1. 运行点云查看器程序
2. 选择您导出的PLY或TXT文件
3. 程序会自动检测格式并加载

## 🎮 **操作方法**

### 鼠标操作
- **左键拖动**: 旋转视图
- **右键拖动**: 平移视图
- **滚轮**: 缩放视图

### 键盘快捷键
- **R**: 重置视图到初始状态
- **C**: 切换坐标映射模式
- **Ctrl+E**: 手动导出点云数据
- **Ctrl+D**: 显示文件详细信息
- **F1**: 显示帮助信息

## 📊 **加载过程信息**

程序加载文件时会在控制台输出详细信息：

```
开始加载PLY文件: your_file.ply
解析PLY头部:
  ply
  format ascii 1.0
  element vertex 611677
  property float x
  property float y
  property float z
  property float scalar_intensity
  end_header
PLY头部解析完成:
  格式: ascii 1.0
  顶点数: 611,677
  属性数: 8
字段映射: X=0, Y=1, Z=2, 强度=6
点 1: X=4.707561, Y=6.194254, Z=-0.309053, 强度=51.0
点 2: X=4.694800, Y=6.204975, Z=-0.258400, 强度=78.0
...
顶点数据读取完成:
  处理行数: 611,677
  有效点: 611,677
  跳过点: 0
点云边界框:
  X: [2.142, 5.489] 跨度: 3.347
  Y: [5.222, 6.205] 跨度: 0.983
  Z: [-2.708, -0.258] 跨度: 2.450
  中心点: (3.815, 5.714, -1.483)
PLY加载完成: 611,677 个点
```

## 🔧 **故障排除**

### 问题1: 文件加载失败
**解决方案**: 
- 确保文件是ASCII格式，不是binary
- 检查文件路径是否正确
- 查看控制台输出的错误信息

### 问题2: 点云显示异常
**解决方案**:
- 按R键重置视图
- 按C键切换坐标映射
- 检查点云的边界框信息

### 问题3: 坐标值异常
**解决方案**:
- 确认CloudCompare中显示正常
- 重新导出为PLY格式
- 检查导出时是否选择了ASCII格式

## 📈 **性能优化**

- **大文件处理**: 程序自动处理大型点云文件
- **内存管理**: 只加载XYZ坐标，忽略不必要的属性
- **渲染优化**: 使用OpenGL进行硬件加速渲染
- **颜色映射**: 基于高度的自动颜色渐变

## 🎨 **显示效果**

程序会自动为点云添加基于高度的颜色映射：
- **蓝色**: 低海拔点
- **绿色**: 中等海拔点  
- **红色**: 高海拔点

## 💾 **数据导出**

程序支持将加载的点云数据导出为：
- **TXT格式**: 带注释的文本文件
- **CSV格式**: 纯数据，便于Excel处理
- **自动导出**: 加载时自动保存到同目录
- **手动导出**: Ctrl+E选择保存位置

## 🔍 **调试信息**

- **Ctrl+D**: 查看文件详细信息和头部内容
- **控制台输出**: 详细的加载过程和统计信息
- **错误提示**: 清晰的错误信息和解决建议

---

## 📞 **技术支持**

如果遇到问题，请查看控制台输出的详细信息，这些信息有助于诊断问题。

**推荐工作流程**: CloudCompare → 导出PLY(ASCII) → 点云查看器加载 ✅

**支持的格式**: PLY (推荐) 和 TXT (CloudCompare ASCII导出)
